<?xml version="1.0" ?>
<container xmlns="http://symfony.com/schema/dic/services"
           xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
           xsi:schemaLocation="http://symfony.com/schema/dic/services http://symfony.com/schema/dic/services/services-1.0.xsd">

    <services>

        <!-- Application environment -->
        <service id="service_bus.environment" class="Desperado\Domain\Environment\Environment" public="true">
            <argument>%service_bus.environment%</argument>
        </service>

        <!-- Log handler -->
        <service id="service_bus.logger.handler.echo_handler"
                 class="Desperado\Infrastructure\Bridge\Logger\Handlers\ColorizeStdOutHandler"
                 public="false"/>

        <!-- Process id processor -->
        <service id="service_bus.logger.processor.process_id" class="Monolog\Processor\ProcessIdProcessor"
                 public="false"/>

        <!-- Default logger instance -->
        <service id="service_bus.logger" class="Monolog\Logger" public="false">
            <factory class="Desperado\Infrastructure\Bridge\Logger\LoggerRegistry" method="getLogger"/>
            <argument>%service_bus.entry_point_name%</argument>
        </service>


    </services>
</container>
